@model AdminDashboardViewModel

@{
    string DisplayPaymentStatus(string? status)
    {
        return string.Equals(status?.Trim(), "Paid", StringComparison.OrdinalIgnoreCase) ? "Paid" : "Pending";
    }
}


<style>
    body {
        background-color: #f4f6f9;
    }

    .dashboard-header {
        background: linear-gradient(135deg, #1e3c72, #2a5298);
        padding: 30px;
        border-radius: 20px;
        color: white;
        box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    }

        .dashboard-header h1 {
            font-weight: 600;
        }

    .card {
        border: none;
        border-radius: 18px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        transition: 0.3s ease;
    }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
        }

    .card-header {
        background: transparent;
        font-weight: 600;
        font-size: 18px;
        border-bottom: 1px solid #eee;
        padding: 18px 20px;
    }

    .table {
        border-radius: 15px;
        overflow: hidden;
    }

        .table thead {
            background: #2a5298;
            color: white;
        }

    .table-striped tbody tr:nth-of-type(odd) {
        background-color: #f9fbfd;
    }

    .btn {
        border-radius: 10px;
        font-weight: 500;
        padding: 6px 14px;
        transition: 0.3s;
    }

        .btn:hover {
            transform: scale(1.05);
        }

    .badge {
        padding: 6px 10px;
        border-radius: 8px;
        font-size: 13px;
    }

    .stat-card {
        border-radius: 20px;
        color: white;
        padding: 25px;
        position: relative;
        overflow: hidden;
    }

        .stat-card h5 {
            font-weight: 500;
            opacity: 0.9;
        }

        .stat-card .display-4 {
            font-weight: 700;
        }

    .stat-primary {
        background: linear-gradient(135deg, #4e73df, #224abe);
    }

    .stat-success {
        background: linear-gradient(135deg, #1cc88a, #13855c);
    }

    .stat-info {
        background: linear-gradient(135deg, #36b9cc, #258391);
    }

    .stat-warning {
        background: linear-gradient(135deg, #f6c23e, #dda20a);
    }

</style>


<div class="dashboard-header mb-4">
    <h1>Admin Dashboard</h1>
    <p class="text-muted">Welcome to RadioCabs Admin Panel</p>
</div>

<!-- Statistics Cards -->
<div class="row mb-4 g-4">
    <div class="col-md-3">
        <div class="stat-card stat-primary">
            <h5>Total Companies</h5>
            <p class="display-4">@Model.TotalCompanies</p>
        </div>
    </div>

    <div class="col-md-3">
        <div class="stat-card stat-success">
            <h5>Total Drivers</h5>
            <p class="display-4">@Model.TotalDrivers</p>
        </div>
    </div>

    <div class="col-md-3">
        <div class="stat-card stat-info">
            <h5>Total Advertisements</h5>
            <p class="display-4">@Model.TotalAdvertisements</p>
        </div>
    </div>

    <div class="col-md-3">
        <div class="stat-card stat-warning">
            <h5>Total Feedbacks</h5>
            <p class="display-4">@Model.TotalFeedbacks</p>
        </div>
    </div>
</div>


<!-- Payment & Membership Statistics -->
<div class="row mb-4">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">Payment Status Overview</div>
            <div class="card-body">
                <p><strong>Pending Payments:</strong> <span class="badge bg-warning text-dark">@Model.PendingPayments</span></p>
                <p><strong>Completed Payments:</strong> <span class="badge bg-success">@Model.CompletedPayments</span></p>
                <p><strong>Total Revenue:</strong> <span class="badge bg-primary">@Model.TotalRevenue.ToString("C")</span></p>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">Membership Distribution</div>
            <div class="card-body">
                <p><strong>Premium Members:</strong> <span class="badge bg-success">@Model.PremiumMembers</span></p>
                <p><strong>Basic Members:</strong> <span class="badge bg-info text-dark">@Model.BasicMembers</span></p>
                <p><strong>Free Members:</strong> <span class="badge bg-secondary">@Model.FreeMembers</span></p>
            </div>
        </div>
    </div>
</div>

<!-- Recent Companies Table -->
<div class="card mb-4">
    <div class="card-header">Recent Companies</div>
    <div class="table-responsive">
        <table class="table table-striped mb-0">
            <thead>
                <tr>
                    <th>Company Name</th>
                    <th>Email</th>
                    <th>Membership</th>
                    <th>Payment Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var company in Model.Companies.Take(5))
                {
                    <tr>
                        <td>@company.CompanyName</td>
                        <td>@company.Email</td>
                        <td><span class="badge bg-info text-dark">@company.MembershipType</span></td>
                        <td>
                            <span class="badge @(DisplayPaymentStatus(company.PaymentStatus) == "Paid" ? "bg-success" : "bg-warning text-dark")">
                                @DisplayPaymentStatus(company.PaymentStatus)
                            </span>
                        </td>
                        <td class="d-flex gap-1">
                            <a href="/Admin/ViewCompanyDetails/@company.CompanyId" class="btn btn-sm btn-info">View</a>
                            <a href="/Admin/EditCompany/@company.CompanyId" class="btn btn-sm btn-warning">Edit</a>
                            <form asp-controller="Admin" asp-action="DeleteCompany" asp-route-id="@company.CompanyId" method="post" onsubmit="return confirm('Delete this company profile?');">
                                @Html.AntiForgeryToken()
                                <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
    <div class="card-footer">
        <a href="/Admin/ManageCompanies" class="btn btn-primary">View All Companies</a>
    </div>
</div>

<!-- Recent Drivers Table -->
<div class="card mb-4">
    <div class="card-header">Recent Drivers</div>
    <div class="table-responsive">
        <table class="table table-striped mb-0">
            <thead>
                <tr>
                    <th>Driver Name</th>
                    <th>Driver ID</th>
                    <th>City</th>
                    <th>Payment Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var driver in Model.Drivers.Take(5))
                {
                    <tr>
                        <td>@driver.DriverName</td>
                        <td>@driver.DriverUniqueId</td>
                        <td>@(driver.City ?? "-")</td>
                        <td>
                            <span class="badge @(DisplayPaymentStatus(driver.PaymentStatus) == "Paid" ? "bg-success" : "bg-warning text-dark")">
                                @DisplayPaymentStatus(driver.PaymentStatus)
                            </span>
                        </td>
                        <td class="d-flex gap-1">
                            <a href="/Admin/ViewDriverDetails/@driver.DriverId" class="btn btn-sm btn-info">View</a>
                            <a href="/Admin/EditDriver/@driver.DriverId" class="btn btn-sm btn-warning">Edit</a>
                            <form asp-controller="Admin" asp-action="DeleteDriver" asp-route-id="@driver.DriverId" method="post" onsubmit="return confirm('Delete this driver profile?');">
                                @Html.AntiForgeryToken()
                                <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
    <div class="card-footer">
        <a href="/Admin/ManageDrivers" class="btn btn-success">Manage All Drivers</a>
    </div>
</div>

<!-- Recent Feedback Table -->
<div class="card mb-4">
    <div class="card-header">Recent Feedback</div>
    <div class="table-responsive">
        <table class="table table-striped mb-0">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Contact</th>
                    <th>City</th>
                    <th>Description</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @if (!Model.Feedbacks.Any())
                {
                    <tr>
                        <td colspan="6" class="text-center text-muted py-4">No feedback entries found.</td>
                    </tr>
                }
                else
                {
                    @foreach (var feedback in Model.Feedbacks.Take(5))
                    {
                        <tr>
                            <td>@(feedback.Name ?? "-")</td>
                            <td>@(feedback.Type ?? "-")</td>
                            <td>
                                @(feedback.Mobile ?? "-")
                                <br />
                                <small>@(feedback.Email ?? "-")</small>
                            </td>
                            <td>@(feedback.City ?? "-")</td>
                            <td>@(feedback.Description ?? "-")</td>
                            <td class="d-flex gap-1">
                                <a href="/Admin/ViewFeedbackDetails/@feedback.FeedbackId" class="btn btn-sm btn-info">View</a>
                                <form asp-controller="Admin" asp-action="DeleteFeedback" asp-route-id="@feedback.FeedbackId" method="post" onsubmit="return confirm('Delete this feedback entry?');">
                                    @Html.AntiForgeryToken()
                                    <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                                </form>
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
    <div class="card-footer">
        <a href="/Admin/ManageFeedbacks" class="btn btn-warning">View All Feedback</a>
    </div>
</div>

<!-- Recent Advertisements Table -->
<div class="card mb-4">
    <div class="card-header">Recent Advertisements</div>
    <div class="table-responsive">
        <table class="table table-striped mb-0">
            <thead>
                <tr>
                    <th>Company Name</th>
                    <th>Email</th>
                    <th>Mobile</th>
                    <th>Payment Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @if (!Model.Advertisements.Any())
                {
                    <tr>
                        <td colspan="5" class="text-center text-muted py-4">No advertisements found.</td>
                    </tr>
                }
                else
                {
                    @foreach (var advertisement in Model.Advertisements.Take(5))
                    {
                        <tr>
                            <td>@(advertisement.CompanyName ?? "-")</td>
                            <td>@(advertisement.Email ?? "-")</td>
                            <td>@(advertisement.Mobile ?? "-")</td>
                            <td>
                                <span class="badge @(DisplayPaymentStatus(advertisement.PaymentStatus) == "Paid" ? "bg-success" : "bg-warning text-dark")">
                                    @DisplayPaymentStatus(advertisement.PaymentStatus)
                                </span>
                            </td>
                            <td class="d-flex gap-1">
                                <a href="/Admin/ViewAdvertisementDetails/@advertisement.AdvertisementId" class="btn btn-sm btn-info">View</a>
                                <a href="/Admin/EditAdvertisement/@advertisement.AdvertisementId" class="btn btn-sm btn-warning">Edit</a>
                                <form asp-controller="Admin" asp-action="DeleteAdvertisement" asp-route-id="@advertisement.AdvertisementId" method="post" onsubmit="return confirm('Delete this advertisement entry?');">
                                    @Html.AntiForgeryToken()
                                    <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                                </form>
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
    <div class="card-footer">
        <a href="/Admin/ManageAdvertisements" class="btn btn-info">Manage All Advertisements</a>
    </div>
</div>
